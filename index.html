<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JARVIS Live Map System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>

@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

*{
  box-sizing:border-box;
}

body{
  margin:0;
  background:black;
  font-family:'Orbitron',sans-serif;
  color:#00ffff;
  overflow:hidden;
}

/* Header */
#header{
  height:60px;
  background:linear-gradient(90deg,#001,#003,#001);
  display:flex;
  align-items:center;
  justify-content:center;
  border-bottom:2px solid cyan;
  box-shadow:0 0 20px cyan;
}

#header h2{
  margin:0;
  letter-spacing:2px;
  text-shadow:0 0 10px cyan;
}

/* Info Bar */
#info{
  height:40px;
  background:#020b14;
  display:flex;
  align-items:center;
  justify-content:center;
  border-bottom:1px solid cyan;
  font-size:13px;
}

/* Map */
#map{
  height:calc(100vh - 100px);
  width:100%;
  border-top:2px solid cyan;
  box-shadow:0 0 30px cyan inset;
}

/* HUD Effect */
#hud{
  position:fixed;
  inset:0;
  pointer-events:none;
  background:
    repeating-linear-gradient(
      0deg,
      rgba(0,255,255,0.03),
      rgba(0,255,255,0.03) 1px,
      transparent 2px,
      transparent 4px
    );
  animation:scan 5s linear infinite;
}

@keyframes scan{
  from{background-position:0 0;}
  to{background-position:0 100px;}
}

/* Glow Button */
#centerBtn{
  position:fixed;
  bottom:15px;
  right:15px;
  background:black;
  color:cyan;
  border:2px solid cyan;
  padding:10px 15px;
  border-radius:50px;
  font-size:12px;
  box-shadow:0 0 15px cyan;
}

#centerBtn:active{
  background:cyan;
  color:black;
}

</style>
</head>

<body>

<!-- Header -->
<div id="header">
  <h2>J.A.R.V.I.S MAP SYSTEM</h2>
</div>

<!-- Info -->
<div id="info" id="status">
  Initializing...
</div>

<!-- Map -->
<div id="map"></div>

<!-- HUD Overlay -->
<div id="hud"></div>

<!-- Center Button -->
<button id="centerBtn">CENTER GPS</button>


<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>

let map;
let userMarker=null;
let lastPos=null;

// Init Map
map = L.map('map',{
  zoomControl:false
}).setView([20,0],2);

// Tiles
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  attribution:'© OpenStreetMap'
}).addTo(map);

// Custom Icon
const userIcon = L.icon({
  iconUrl:'https://cdn-icons-png.flaticon.com/512/149/149071.png',
  iconSize:[35,35]
});

// Status
const info=document.getElementById("info");

// GPS Tracking
if("geolocation" in navigator){

  navigator.geolocation.watchPosition(

    pos=>{

      let lat=pos.coords.latitude;
      let lng=pos.coords.longitude;

      lastPos=[lat,lng];

      info.innerHTML=
        "GPS LOCKED ⚡ | " +
        lat.toFixed(5)+
        " , "+
        lng.toFixed(5);

      if(!userMarker){

        userMarker=L.marker([lat,lng],{
          icon:userIcon
        })
        .addTo(map)
        .bindPopup("YOU");

        map.setView([lat,lng],15);

      }else{

        userMarker.setLatLng([lat,lng]);

      }

    },

    err=>{
      info.innerHTML="GPS ERROR ❌ Enable Location";
      alert("Turn ON GPS & Allow Location");
    },

    {
      enableHighAccuracy:true,
      maximumAge:0,
      timeout:10000
    }

  );

}else{

  info.innerHTML="GPS NOT SUPPORTED";

}


// Center Button
document.getElementById("centerBtn").onclick=function(){

  if(lastPos){
    map.setView(lastPos,16,{
      animate:true
    });
  }else{
    alert("Waiting for GPS...");
  }

};

</script>

</body>
</html>
